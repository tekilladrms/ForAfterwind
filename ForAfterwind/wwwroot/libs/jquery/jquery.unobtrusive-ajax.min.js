/*!
** Unobtrusive Ajax support library for jQuery
** Copyright (C) Microsoft Corporation. All rights reserved.
*/
(function(c){var i="unobtrusiveAjaxClick",e="unobtrusiveAjaxClickTarget",b="unobtrusiveValidation";function j(m,k){var l=window,n=(m||"").split(".");while(l&&n.length){l=l[n.shift()]}if(typeof(l)==="function"){return l}k.push(m);return Function.constructor.apply(null,k)}function d(k){return k==="GET"||k==="POST"}function g(k,l){if(!d(l)){k.setRequestHeader("X-HTTP-Method-Override",l)}}function h(k,l,n){var m;if(n.indexOf("application/x-javascript")!==-1){return}m=(k.getAttribute("data-ajax-mode")||"").toUpperCase();c(k.getAttribute("data-ajax-update")).each(function(o,q){var p;switch(m){case"BEFORE":p=q.firstChild;c("<div />").html(l).contents().each(function(){q.insertBefore(this,p)});break;case"AFTER":c("<div />").html(l).contents().each(function(){q.appendChild(this)});break;case"REPLACE-WITH":c(q).replaceWith(l);break;default:c(q).html(l);break}})}function a(o,n){var m,r,q,p;m=o.getAttribute("data-ajax-confirm");if(m&&!window.confirm(m)){return}r=c(o.getAttribute("data-ajax-loading"));p=parseInt(o.getAttribute("data-ajax-loading-duration"),10)||0;c.extend(n,{type:o.getAttribute("data-ajax-method")||undefined,url:o.getAttribute("data-ajax-url")||undefined,cache:!!o.getAttribute("data-ajax-cache"),beforeSend:function(t){var s;g(t,q);s=j(o.getAttribute("data-ajax-begin"),["xhr"]).apply(o,arguments);if(s!==false){r.show(p)}return s},complete:function(){r.hide(p);j(o.getAttribute("data-ajax-complete"),["xhr","status"]).apply(o,arguments)},success:function(t,s,u){h(o,t,u.getResponseHeader("Content-Type")||"text/html");j(o.getAttribute("data-ajax-success"),["data","status","xhr"]).apply(o,arguments)},error:function(){j(o.getAttribute("data-ajax-failure"),["xhr","status","error"]).apply(o,arguments)}});n.data.push({name:"X-Requested-With",value:"XMLHttpRequest"});q=n.type.toUpperCase();if(!d(q)){n.type="POST";n.data.push({name:"X-HTTP-Method-Override",value:q})}var l=c(o);if(l.is("form")&&l.attr("enctype")=="multipart/form-data"){var k=new FormData();c.each(n.data,function(t,s){k.append(s.name,s.value)});c("input[type=file]",l).each(function(){var s=this;c.each(s.files,function(u,t){k.append(s.name,t)})});c.extend(n,{processData:false,contentType:false,data:k})}c.ajax(n)}function f(l){var k=c(l).data(b);return !k||!k.validate||k.validate()}c(document).on("click","a[data-ajax=true]",function(k){k.preventDefault();a(this,{url:this.href,type:"GET",data:[]})});c(document).on("click","form[data-ajax=true] input[type=image]",function(k){var l=k.target.name,n=c(k.target),m=c(n.parents("form")[0]),o=n.offset();m.data(i,[{name:l+".x",value:Math.round(k.pageX-o.left)},{name:l+".y",value:Math.round(k.pageY-o.top)}]);setTimeout(function(){m.removeData(i)},0)});c(document).on("click","form[data-ajax=true] :submit",function(k){var l=k.currentTarget.name,n=c(k.target),m=c(n.parents("form")[0]);m.data(i,l?[{name:l,value:k.currentTarget.value}]:[]);m.data(e,n);setTimeout(function(){m.removeData(i);m.removeData(e)},0)});c(document).on("submit","form[data-ajax=true]",function(l){var m=c(this).data(i)||[],k=c(this).data(e),n=k&&k.hasClass("cancel");l.preventDefault();if(!n&&!f(this)){return}a(this,{url:this.action,type:this.method||"GET",data:m.concat(c(this).serializeArray())})})}(jQuery));